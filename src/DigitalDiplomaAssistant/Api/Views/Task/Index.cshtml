@model Domain.TaskQueryPublicTypes.TaskWithAvaliableStatuses

@{
    ViewData["Title"] = "DDA| Task";
    Layout = "~/Views/_Layout.cshtml"; 
}

<div class="container">

    <div class="row">

        <div class="col-md-auto">
            <div class="progress">
                <div class="progress-bar" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100"></div>
            </div>
        </div>
        <div class="col">
            <h4>
                <nav aria-label="breadcrumb">
                    <ol class="breadcrumb">
                        <li class="breadcrumb-item">
                            <a href="#">@Model.Type</a>
                        </li>
                        <li class="breadcrumb-item active" aria-current="page">@Model.Student.LastName @Model.Student.FirstName</li>
                    </ol>
                </nav>
            </h4>
            <hr>
            <div class="container">
                <div class="row">
                    <div class="col">
                        <h6>Дипломний керiвник:</h6>@Model.Supervisor.LastName @Model.Supervisor.FirstName
                    </div>
                    <div class="col">
                        <h6>Группа:</h6>@Model.Group
                    </div>
                    <div class="w-100"></div>
                    <div class="col">
                        <h6>Дата здачi:</h6>@Model.Deadline.ToString("dd.MM.yyyy")
                    </div>
                    <div class="col">
                        <h6>Назначений:</h6>@Model.Assignee.LastName @Model.Assignee.FirstName
                    </div>
                    <div class="w-100"></div>
                    <div class="col">
                        <h6>Статус:</h6> @Model.Status
                    </div>
                </div>
            </div>
            <h4> Опис:</h4> @Model.Description.Text
            @foreach (var attachment in Model.Description.Attachments)
            {
                <br>
                <a href="#">@attachment.Name</a>
            }
            <hr>
            <h4> Комментарi:</h4>
            @{
                foreach (var comment in Model.Comments)
                {
                    <ul class="list-group">
                        <li class="list-group-item">
                            <h6>Автор:</h6> @comment.Author.LastName @comment.Author.FirstName
                            <hr>
                            <h6>Дата:</h6>@comment.PostDate.ToString("dd.MM.yyyy")
                            <hr>
                            <h6>Комментар:</h6>
                            @comment.Text
                            @foreach (var attachment in comment.Attachments)
                            {
                                <br>
                                <a href="/task/@Model.Id/file/@attachment.FilePath">@attachment.Name</a>
                            }
                        </li>
                    </ul>
                    <br>
                }
            }
            <hr>
            <form action="/task/@Model.Id/comments" method="post" class="form-group" enctype="multipart/form-data">
                <label for="exampleFormControlTextarea1">
                    <h4> Додати комментар:</h4>
                </label>
                <textarea class="form-control" id="exampleFormControlTextarea1" rows="3" name="text"></textarea>
                <h4>
                    <label for="exampleFormControlFile1">Завантажити новий файл:</label>
                </h4>
                <input type="file" class="form-control-file" id="exampleFormControlFile1" name="file">
                <button type="submit" class="btn btn-light">Надiслати</button>
            </form>
            <hr>
            <br>
            <br>
            <br>
        </div>
        <div class="col col-lg-2">
            <div class="list-group">
                @foreach (var status in Model.AvaliableStatuses)
                {
                    <form action="/task/@Model.Id/status" method="post">
                        <button name="status" value="@status" class="btn btn-light" type="submit">@status</button>
                    </form>
                    <br>
                }
            </div>
        </div>
    </div>
</div>